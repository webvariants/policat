CREATE TABLE api_token_offset (id INT AUTO_INCREMENT, petition_api_token_id INT NOT NULL, country VARCHAR(5) NOT NULL, addnum INT DEFAULT 0 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX p_counter_idx_idx (petition_api_token_id, country), INDEX petition_api_token_id_idx (petition_api_token_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE bill (id INT AUTO_INCREMENT, user_id INT, order_id INT, first_name VARCHAR(40), last_name VARCHAR(40), organisation VARCHAR(120), street VARCHAR(120), city VARCHAR(120), post_code VARCHAR(100), country VARCHAR(2), vat VARCHAR(40), price DECIMAL(10, 2) NOT NULL, tax DECIMAL(5, 2) NOT NULL, tax_note LONGTEXT, price_brutto DECIMAL(10, 2) NOT NULL, markup LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX order_id_idx (order_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE bill_item (id INT AUTO_INCREMENT, bill_id INT NOT NULL, name VARCHAR(120) NOT NULL, price DECIMAL(10, 2) NOT NULL, days INT NOT NULL, emails INT NOT NULL, INDEX bill_id_idx (bill_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE campaign (id INT AUTO_INCREMENT, name TEXT NOT NULL, status INT DEFAULT 1 NOT NULL, billing_enabled TINYINT DEFAULT 0 NOT NULL, owner_register INT DEFAULT 0 NOT NULL, allow_download INT DEFAULT 0 NOT NULL, become_petition_admin INT DEFAULT 0 NOT NULL, privacy_policy LONGTEXT, address LONGTEXT, data_owner_id INT, quota_id INT, order_id INT, public_enabled TINYINT DEFAULT 0 NOT NULL, join_enabled TINYINT DEFAULT 0 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX campaign_status_idx (status), INDEX campaign_name_idx (name(100)), INDEX data_owner_id_idx (data_owner_id), INDEX order_id_idx (order_id), INDEX quota_id_idx (quota_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE campaign_rights (campaign_id INT, user_id INT, active TINYINT DEFAULT 0 NOT NULL, member TINYINT DEFAULT 0 NOT NULL, admin TINYINT DEFAULT 0 NOT NULL, PRIMARY KEY(campaign_id, user_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE campaign_store (id BIGINT AUTO_INCREMENT, campaign_id INT NOT NULL, key_ VARCHAR(80) NOT NULL, value LONGTEXT, language_id VARCHAR(5), UNIQUE INDEX cam_sto_idx_idx (campaign_id, key_, language_id), INDEX language_id_idx (language_id), INDEX campaign_id_idx (campaign_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE contact (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, mailing_list_id INT NOT NULL, email VARCHAR(80) NOT NULL, gender TINYINT NOT NULL, firstname VARCHAR(100) NOT NULL, lastname VARCHAR(100) NOT NULL, country VARCHAR(5), language_id VARCHAR(5), bounce TINYINT DEFAULT 0 NOT NULL, bounce_at DATETIME, bounce_blocked TINYINT DEFAULT 0 NOT NULL, bounce_hard TINYINT DEFAULT 0 NOT NULL, bounce_related_to VARCHAR(20), bounce_error VARCHAR(20), INDEX contact_status_idx (status), INDEX contact_mail_status_idx (status, mailing_list_id), INDEX contact_country_idx (country), INDEX contact_gender_idx (gender), INDEX contact_lastname_idx (lastname), INDEX mailing_list_id_idx (mailing_list_id), INDEX language_id_idx (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE contact_meta (id INT AUTO_INCREMENT, mailing_list_meta_id INT NOT NULL, contact_id INT NOT NULL, value TEXT, mailing_list_meta_choice_id INT, INDEX mailing_list_meta_id_idx (mailing_list_meta_id), INDEX contact_id_idx (contact_id), INDEX mailing_list_meta_choice_id_idx (mailing_list_meta_choice_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE country_collection (id INT AUTO_INCREMENT, name VARCHAR(80) NOT NULL UNIQUE, countries LONGTEXT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE country_tax (id INT AUTO_INCREMENT, country VARCHAR(2) NOT NULL UNIQUE, tax_no_vat DECIMAL(5, 2) NOT NULL, no_vat_note_id INT, tax_vat DECIMAL(5, 2) NOT NULL, vat_note_id INT, INDEX no_vat_note_id_idx (no_vat_note_id), INDEX vat_note_id_idx (vat_note_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE default_text (id INT AUTO_INCREMENT, language_id VARCHAR(5) NOT NULL, text VARCHAR(20) NOT NULL, subject VARCHAR(255) DEFAULT '' NOT NULL, body LONGTEXT NOT NULL, UNIQUE INDEX def_text_lang_text_idx (language_id, text), INDEX language_id_idx (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE download (id INT AUTO_INCREMENT, user_id INT, widget_id INT, petition_id INT, campaign_id INT, filename VARCHAR(80) NOT NULL UNIQUE, filter LONGTEXT, type VARCHAR(40) NOT NULL, subscriber TINYINT DEFAULT 0 NOT NULL, count INT DEFAULT 0 NOT NULL, pages INT DEFAULT 0 NOT NULL, pages_processed INT DEFAULT 0 NOT NULL, incremental TINYINT DEFAULT 0 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX widget_id_idx (widget_id), INDEX petition_id_idx (petition_id), INDEX campaign_id_idx (campaign_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE facebook_tab (id INT AUTO_INCREMENT, page_id VARCHAR(40), language_id VARCHAR(5), widget_id INT, INDEX ft_page_idx (page_id), UNIQUE INDEX ft_page_lang_idx (page_id, language_id), INDEX widget_id_idx (widget_id), INDEX language_id_idx (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE groups (id INT AUTO_INCREMENT, description TEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE group_member (group_id INT, member_id INT, PRIMARY KEY(group_id, member_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE group_permission (group_id INT, permission_id INT, PRIMARY KEY(group_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE language (id VARCHAR(5), name TEXT, order_number INT NOT NULL, active TINYINT DEFAULT 1 NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX language_order_num_idx (order_number), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE mail_message (id BIGINT AUTO_INCREMENT, message LONGTEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE mailing_list (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, campaign_id INT, name TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX campaign_id_idx (campaign_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE mailing_list_meta (id INT AUTO_INCREMENT, mailing_list_id INT NOT NULL, kind TINYINT NOT NULL, name TEXT NOT NULL, subst TEXT NOT NULL, data_json LONGTEXT, INDEX mailing_list_id_idx (mailing_list_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE mailing_list_meta_choice (id INT AUTO_INCREMENT, mailing_list_meta_id INT NOT NULL, choice VARCHAR(120) NOT NULL, INDEX mlmc_choice_idx (choice), INDEX mlmc_ml_choice_idx (mailing_list_meta_id, choice), INDEX mailing_list_meta_id_idx (mailing_list_meta_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE mapping (id INT AUTO_INCREMENT, name VARCHAR(120) NOT NULL UNIQUE, object_version VARCHAR(15) DEFAULT '1', PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE mapping_pair (id INT AUTO_INCREMENT, mapping_id INT NOT NULL, a VARCHAR(80) NOT NULL, b VARCHAR(80) NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX mp_a_idx_idx (mapping_id, a), UNIQUE INDEX mp_ab_idx_idx (mapping_id, a, b), INDEX mapping_id_idx (mapping_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE media_file (id INT AUTO_INCREMENT, petition_id INT NOT NULL, filename VARCHAR(255), mimetype VARCHAR(40), title VARCHAR(255), extension VARCHAR(10), size BIGINT DEFAULT 1 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX petition_id_idx (petition_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE member (id INT AUTO_INCREMENT, sf_guard_user_id INT, campaign_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX sf_guard_user_id_idx (sf_guard_user_id), INDEX campaign_id_idx (campaign_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE migration_version (id BIGINT AUTO_INCREMENT, version INT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE offer (id INT AUTO_INCREMENT, user_id INT, campaign_id INT, first_name VARCHAR(40), last_name VARCHAR(40), organisation VARCHAR(120), street VARCHAR(120), city VARCHAR(120), post_code VARCHAR(100), country VARCHAR(2), vat VARCHAR(40), price DECIMAL(10, 2) NOT NULL, tax DECIMAL(5, 2) NOT NULL, tax_note LONGTEXT, price_brutto DECIMAL(10, 2) NOT NULL, markup LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX campaign_id_idx (campaign_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE offer_item (id INT AUTO_INCREMENT, offer_id INT NOT NULL, name VARCHAR(120) NOT NULL, price DECIMAL(10, 2) NOT NULL, days INT NOT NULL, emails INT NOT NULL, INDEX offer_id_idx (offer_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE orders (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, paid_at DATE, user_id INT, first_name VARCHAR(40), last_name VARCHAR(40), organisation VARCHAR(120), street VARCHAR(120), city VARCHAR(120), post_code VARCHAR(100), country VARCHAR(2), vat VARCHAR(40), tax DECIMAL(5, 2), tax_note LONGTEXT, paypal_payment_id VARCHAR(80), paypal_sale_id VARCHAR(80), paypal_status INT DEFAULT 1 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE owner (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, campaign_id INT NOT NULL, first_widget_id INT, firstname VARCHAR(80) DEFAULT '' NOT NULL, lastname VARCHAR(80) DEFAULT '' NOT NULL, function VARCHAR(200) DEFAULT '' NOT NULL, organisation VARCHAR(200) DEFAULT '' NOT NULL, email VARCHAR(80) DEFAULT '' NOT NULL, phone VARCHAR(80) DEFAULT '' NOT NULL, address VARCHAR(200) DEFAULT '' NOT NULL, country VARCHAR(5), password VARCHAR(81) DEFAULT '' NOT NULL, INDEX first_widget_id_idx (first_widget_id), INDEX campaign_id_idx (campaign_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE permission (id INT AUTO_INCREMENT, name VARCHAR(30) NOT NULL UNIQUE, description TEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition (id INT AUTO_INCREMENT, campaign_id INT NOT NULL, follow_petition_id INT, kind TINYINT DEFAULT 1 NOT NULL, titletype TINYINT DEFAULT 0 NOT NULL, nametype TINYINT DEFAULT 2 NOT NULL, status INT DEFAULT 1 NOT NULL, validation_required INT DEFAULT 1 NOT NULL, name TEXT NOT NULL, addnum INT DEFAULT 0 NOT NULL, addnote LONGTEXT, read_more_url TEXT, landing_url TEXT, key_visual VARCHAR(60), paypal_email VARCHAR(80), donate_url VARCHAR(200), donate_widget_edit TINYINT DEFAULT 0 NOT NULL, from_name VARCHAR(80), from_email VARCHAR(80), email_targets LONGTEXT, homepage TINYINT DEFAULT 0 NOT NULL, twitter_tags VARCHAR(200), language_id VARCHAR(5), mailing_list_id INT, editable TINYINT DEFAULT 1 NOT NULL, target_num INT DEFAULT 0 NOT NULL, auto_greeting TINYINT DEFAULT 0 NOT NULL, start_at DATE, end_at DATE, with_comments TINYINT DEFAULT 0 NOT NULL, with_address TINYINT DEFAULT 0 NOT NULL, with_country TINYINT DEFAULT 0 NOT NULL, with_extra1 TINYINT DEFAULT 0 NOT NULL, default_country VARCHAR(5) DEFAULT '' NOT NULL, subscribe_default TINYINT DEFAULT 1 NOT NULL, show_keyvisual TINYINT DEFAULT 0 NOT NULL, pledge_with_comments TINYINT DEFAULT 1 NOT NULL, pledge_header_visual VARCHAR(60), pledge_key_visual VARCHAR(60), pledge_background_color VARCHAR(6) DEFAULT 'ffffff', pledge_color VARCHAR(6) DEFAULT '333333', pledge_head_color VARCHAR(6) DEFAULT '333333', pledge_font VARCHAR(80), pledge_info_columns LONGTEXT, activity_at DATETIME, widget_individualise TINYINT DEFAULT 1 NOT NULL, style_font_family VARCHAR(80) DEFAULT '"Lucida Sans Unicode", Verdana, Arial' NOT NULL, style_title_color VARCHAR(7) DEFAULT '#181716' NOT NULL, style_body_color VARCHAR(7) DEFAULT '#666666' NOT NULL, style_button_color VARCHAR(7) DEFAULT '#76b235' NOT NULL, style_bg_left_color VARCHAR(7) DEFAULT '#e5e5e5' NOT NULL, style_bg_right_color VARCHAR(7) DEFAULT '#f2f2f2' NOT NULL, style_form_title_color VARCHAR(7) DEFAULT '#181716' NOT NULL, style_button_primary_color VARCHAR(7) DEFAULT '#76b235' NOT NULL, style_label_color VARCHAR(7) DEFAULT '#666666' NOT NULL, email_button_color VARCHAR(7) DEFAULT '#b7d9f9' NOT NULL, share TINYINT DEFAULT 1 NOT NULL, country_collection_id INT, deleted_pendings INT DEFAULT 0 NOT NULL, deleted_hard_bounces INT DEFAULT 0 NOT NULL, deleted_bounces_manually INT DEFAULT 0 NOT NULL, label_mode TINYINT DEFAULT 1 NOT NULL, policy_checkbox TINYINT DEFAULT 1 NOT NULL, thank_you_email TINYINT DEFAULT 0 NOT NULL, themeid INT, last_signings TINYINT DEFAULT 0 NOT NULL, last_signings_city TINYINT DEFAULT 0 NOT NULL, last_signings_country TINYINT DEFAULT 0 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX petition_status_idx (status), INDEX petition_home_stat_idx (status, homepage), INDEX petition_name_idx (name(100)), INDEX petition_activity_idx (activity_at, status), INDEX petition_activity2_idx (campaign_id, activity_at, status), INDEX campaign_id_idx (campaign_id), INDEX language_id_idx (language_id), INDEX mailing_list_id_idx (mailing_list_id), INDEX country_collection_id_idx (country_collection_id), INDEX follow_petition_id_idx (follow_petition_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_api_token (id INT AUTO_INCREMENT, petition_id INT NOT NULL, name VARCHAR(80) NOT NULL, token VARCHAR(80) NOT NULL UNIQUE, status INT DEFAULT 1 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX p_api_token_status_idx (petition_id, status), INDEX petition_id_idx (petition_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_contact (petition_id INT, contact_id INT, secret VARCHAR(40) NOT NULL, password VARCHAR(255), password_reset VARCHAR(255), password_reset_until DATE, comment LONGTEXT, PRIMARY KEY(petition_id, contact_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_rights (petition_id INT, user_id INT, active TINYINT DEFAULT 0 NOT NULL, member TINYINT DEFAULT 0 NOT NULL, admin TINYINT DEFAULT 0 NOT NULL, PRIMARY KEY(petition_id, user_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_signing (id BIGINT AUTO_INCREMENT, petition_id INT NOT NULL, fields LONGTEXT, status INT DEFAULT 1 NOT NULL, verified INT DEFAULT 0 NOT NULL, email VARCHAR(80), country VARCHAR(5), validation_kind TINYINT DEFAULT 0 NOT NULL, validation_data VARCHAR(16), delete_code VARCHAR(16), widget_id INT, wave_sent SMALLINT DEFAULT 0 NOT NULL, wave_pending SMALLINT DEFAULT 0 NOT NULL, wave_cron TINYINT DEFAULT 0 NOT NULL, subscribe TINYINT DEFAULT 0 NOT NULL, email_hash VARCHAR(80), mailed_at DATETIME, fullname VARCHAR(120), title VARCHAR(10), firstname VARCHAR(100), lastname VARCHAR(100), address VARCHAR(200), city VARCHAR(100), post_code VARCHAR(50), comment LONGTEXT, extra1 VARCHAR(100), privacy TINYINT, email_subject VARCHAR(250), email_body LONGTEXT, ref VARCHAR(250), quota_id INT, quota_emails SMALLINT, thank_sent TINYINT DEFAULT 0 NOT NULL, quota_thank_you_id INT, bounce TINYINT DEFAULT 0 NOT NULL, bounce_at DATETIME, bounce_blocked TINYINT DEFAULT 0 NOT NULL, bounce_hard TINYINT DEFAULT 0 NOT NULL, bounce_related_to VARCHAR(20), bounce_error VARCHAR(20), download_subscriber_id INT, download_data_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX signing_petition_count_index2_idx (petition_id, status, created_at), INDEX signing_petition_count_index3_idx (petition_id, status, country, created_at), INDEX signing_widget_count_index2_idx (widget_id, status, country, created_at), INDEX signing_widget_count_index3_idx (widget_id, status, created_at), INDEX signing_wave_sent_index_idx (wave_sent), INDEX signing_wave_pending_index_idx (wave_pending), INDEX signing_wave_cron_index_idx (wave_cron), INDEX signing_subsrcibe_idx (subscribe), INDEX signing_country_idx (country), INDEX signing_email_hash_idx (email_hash), INDEX signing_pending_index2_idx (status, created_at, id), INDEX signing_pending_index3_idx (status, mailed_at, updated_at, id), INDEX signing_email_duplicate_idx (petition_id, email), INDEX signing_last_signers_idx (petition_id, status, updated_at), INDEX signing_list_name1_idx (petition_id, status, fullname, id), INDEX signing_list_name2_idx (petition_id, status, lastname, id), INDEX signing_list_city_idx (petition_id, status, city, id), INDEX signing_list_country_idx (petition_id, status, country, city, id), INDEX signing_bounce_idx (petition_id, bounce, verified, bounce_at), INDEX signing_inc_dl_sub_idx (petition_id, download_subscriber_id, status, subscribe, id), INDEX signing_inc_dl_data_idx (petition_id, download_data_id, status, id), INDEX petition_id_idx (petition_id), INDEX widget_id_idx (widget_id), INDEX quota_id_idx (quota_id), INDEX quota_thank_you_id_idx (quota_thank_you_id), INDEX download_subscriber_id_idx (download_subscriber_id), INDEX download_data_id_idx (download_data_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_signing_contact (petition_signing_id BIGINT, contact_id INT, wave SMALLINT DEFAULT 1 NOT NULL, INDEX psc_wave_idx (wave), PRIMARY KEY(petition_signing_id, contact_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_signing_search (id BIGINT, keyword VARCHAR(48), PRIMARY KEY(id, keyword)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_signing_wave (id BIGINT AUTO_INCREMENT, petition_signing_id BIGINT, wave SMALLINT DEFAULT 1 NOT NULL, fields LONGTEXT NOT NULL, status INT DEFAULT 1 NOT NULL, email VARCHAR(80), country VARCHAR(5), validation_data TEXT, language_id VARCHAR(5), widget_id INT, contact_num INT DEFAULT 0 NOT NULL, INDEX psw_wave_idx (wave), INDEX psw_status_idx (status), INDEX psw_p_status_idx (petition_signing_id, status), INDEX psw_p_w_status_idx (petition_signing_id, wave, status), INDEX widget_id_idx (widget_id), INDEX language_id_idx (language_id), PRIMARY KEY(id, petition_signing_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE petition_text (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, language_id VARCHAR(5) NOT NULL, petition_id INT NOT NULL, title VARCHAR(255) DEFAULT NULL, target LONGTEXT, background LONGTEXT, intro LONGTEXT, body LONGTEXT, footer LONGTEXT, email_subject TEXT, email_body LONGTEXT, thank_you_email_subject TEXT, thank_you_email_body LONGTEXT, email_validation_subject TEXT NOT NULL, email_validation_body LONGTEXT, email_tellyour_subject TEXT NOT NULL, email_tellyour_body LONGTEXT, email_targets LONGTEXT, privacy_policy_body LONGTEXT, read_more_url TEXT, landing_url TEXT, widget_id INT, pledge_title TEXT, pledge_comment LONGTEXT, pledge_explantory LONGTEXT, pledge_thank_you LONGTEXT, donate_url VARCHAR(200), donate_text LONGTEXT, signers_url VARCHAR(200), label_extra1 VARCHAR(80), placeholder_extra1 VARCHAR(80), form_title VARCHAR(100) DEFAULT NULL, subscribe_text VARCHAR(250) DEFAULT NULL, signers_page LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX petition_id_idx (petition_id), INDEX language_id_idx (language_id), INDEX widget_id_idx (widget_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE pledge (pledge_item_id INT, contact_id INT, status TINYINT DEFAULT 0 NOT NULL, status_at DATETIME, comment LONGTEXT, PRIMARY KEY(pledge_item_id, contact_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE pledge_item (id INT AUTO_INCREMENT, petition_id INT NOT NULL, status TINYINT DEFAULT 0 NOT NULL, name VARCHAR(80) NOT NULL, icon VARCHAR(80) DEFAULT 'star' NOT NULL, color VARCHAR(6) DEFAULT '000000' NOT NULL, INDEX petition_id_idx (petition_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE pledge_text (pledge_item_id INT, petition_text_id INT, text LONGTEXT NOT NULL, PRIMARY KEY(pledge_item_id, petition_text_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE privacy_policy (id BIGINT AUTO_INCREMENT, language_id VARCHAR(5) NOT NULL, body LONGTEXT NOT NULL, INDEX language_id_idx (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE product (id INT AUTO_INCREMENT, name VARCHAR(120) NOT NULL UNIQUE, price DECIMAL(10, 2) NOT NULL, days INT DEFAULT 0 NOT NULL, emails INT DEFAULT 0 NOT NULL, object_version VARCHAR(15) DEFAULT '1', PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE query_cache (id VARCHAR(255), data LONGBLOB, expire DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE quota (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, name VARCHAR(120) NOT NULL, price DECIMAL(10, 2) NOT NULL, days INT NOT NULL, emails INT NOT NULL, user_id INT, campaign_id INT, start_at DATE, end_at DATE, paid_at DATE, emails_remaining INT DEFAULT 0 NOT NULL, order_id INT, upgrade_of_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX campaign_id_idx (campaign_id), INDEX order_id_idx (order_id), INDEX upgrade_of_id_idx (upgrade_of_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE registry (id INT AUTO_INCREMENT, regkey VARCHAR(200) NOT NULL UNIQUE, regclass VARCHAR(40) DEFAULT '' NOT NULL, value LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX registry_key_idx (regkey), INDEX registry_class_idx (regclass), INDEX registry_key_class_idx (regkey, regclass), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE store (id BIGINT AUTO_INCREMENT, key_ VARCHAR(80) NOT NULL, value LONGTEXT, language_id VARCHAR(5), object_version VARCHAR(15) DEFAULT '1', UNIQUE INDEX store_idx_idx (key_, language_id), INDEX language_id_idx (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE target_list_rights (mailing_list_id INT, user_id INT, active TINYINT DEFAULT 0 NOT NULL, PRIMARY KEY(mailing_list_id, user_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE tax_note (id INT AUTO_INCREMENT, name VARCHAR(40) UNIQUE, note LONGTEXT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE ticket (id BIGINT AUTO_INCREMENT, from_id INT, to_id INT, campaign_id INT, petition_id INT, widget_id INT, target_list_id INT, kind SMALLINT DEFAULT 1 NOT NULL, status TINYINT DEFAULT 1 NOT NULL, text LONGTEXT, data_json LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX ticket_kind_idx_idx (kind), INDEX ticket_status_idx_idx (status), INDEX from_id_idx (from_id), INDEX to_id_idx (to_id), INDEX campaign_id_idx (campaign_id), INDEX petition_id_idx (petition_id), INDEX widget_id_idx (widget_id), INDEX target_list_id_idx (target_list_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE widget (id INT AUTO_INCREMENT, parent_id INT, campaign_id INT NOT NULL, petition_id INT NOT NULL, petition_text_id INT NOT NULL, origin_widget_id INT, status INT DEFAULT 1 NOT NULL, title VARCHAR(255) DEFAULT NULL, target LONGTEXT, background LONGTEXT, intro LONGTEXT, footer LONGTEXT, email_subject TEXT, email_body LONGTEXT, stylings LONGTEXT NOT NULL, themeid INT, email VARCHAR(80), organisation VARCHAR(200), landing_url TEXT, donate_url VARCHAR(200), donate_text LONGTEXT, ref TEXT, validation_kind TINYINT DEFAULT 0 NOT NULL, validation_data TEXT, validation_status TINYINT DEFAULT 0, edit_code VARCHAR(40), paypal_email VARCHAR(80), share TINYINT DEFAULT 1 NOT NULL, user_id INT, data_owner TINYINT DEFAULT 0 NOT NULL, activity_at DATETIME, last_ref VARCHAR(200), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, object_version VARCHAR(15) DEFAULT '1', INDEX widget_parent_id_index_idx (parent_id), INDEX widget_activity_idx (activity_at, status), INDEX widget_activity2_idx (petition_id, activity_at, status), INDEX widget_origin_idx (petition_id, origin_widget_id), INDEX widget_email_idx (email, user_id), INDEX campaign_id_idx (campaign_id), INDEX petition_id_idx (petition_id), INDEX petition_text_id_idx (petition_text_id), INDEX user_id_idx (user_id), INDEX origin_widget_id_idx (origin_widget_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE widget_owner (id INT AUTO_INCREMENT, status INT DEFAULT 1 NOT NULL, owner_id INT NOT NULL, widget_id INT NOT NULL, UNIQUE INDEX wo_owner_widget_idx (owner_id, widget_id), UNIQUE INDEX wo_widget_idx (widget_id), INDEX owner_id_idx (owner_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id INT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group (name VARCHAR(255) UNIQUE, description TEXT, id INT AUTO_INCREMENT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id INT, permission_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_permission (name VARCHAR(255) UNIQUE, description TEXT, id INT AUTO_INCREMENT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (user_id INT, remember_key VARCHAR(32), ip_address VARCHAR(50), id INT AUTO_INCREMENT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user (first_name VARCHAR(40), last_name VARCHAR(40), email_address VARCHAR(80) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, id INT AUTO_INCREMENT, organisation VARCHAR(120), website VARCHAR(200), mobile VARCHAR(40), phone VARCHAR(40), street VARCHAR(120), city VARCHAR(120), post_code VARCHAR(100), country VARCHAR(2), vat VARCHAR(40), language_id VARCHAR(5), validation_kind TINYINT DEFAULT 0 NOT NULL, validation_code VARCHAR(20), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), INDEX language_id_idx (language_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id INT, group_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id INT, permission_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = INNODB;
ALTER TABLE api_token_offset ADD CONSTRAINT api_token_offset_petition_api_token_id_petition_api_token_id FOREIGN KEY (petition_api_token_id) REFERENCES petition_api_token(id) ON DELETE CASCADE;
ALTER TABLE bill ADD CONSTRAINT bill_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE bill ADD CONSTRAINT bill_order_id_orders_id FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE SET NULL;
ALTER TABLE bill_item ADD CONSTRAINT bill_item_bill_id_bill_id FOREIGN KEY (bill_id) REFERENCES bill(id) ON DELETE CASCADE;
ALTER TABLE campaign ADD CONSTRAINT campaign_quota_id_quota_id FOREIGN KEY (quota_id) REFERENCES quota(id) ON DELETE SET NULL;
ALTER TABLE campaign ADD CONSTRAINT campaign_order_id_orders_id FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE SET NULL;
ALTER TABLE campaign ADD CONSTRAINT campaign_data_owner_id_sf_guard_user_id FOREIGN KEY (data_owner_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE campaign_rights ADD CONSTRAINT campaign_rights_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE campaign_rights ADD CONSTRAINT campaign_rights_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE campaign_store ADD CONSTRAINT campaign_store_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE;
ALTER TABLE campaign_store ADD CONSTRAINT campaign_store_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE contact ADD CONSTRAINT contact_mailing_list_id_mailing_list_id FOREIGN KEY (mailing_list_id) REFERENCES mailing_list(id) ON DELETE CASCADE;
ALTER TABLE contact ADD CONSTRAINT contact_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE SET NULL;
ALTER TABLE contact_meta ADD CONSTRAINT contact_meta_mailing_list_meta_id_mailing_list_meta_id FOREIGN KEY (mailing_list_meta_id) REFERENCES mailing_list_meta(id) ON DELETE CASCADE;
ALTER TABLE contact_meta ADD CONSTRAINT contact_meta_contact_id_contact_id FOREIGN KEY (contact_id) REFERENCES contact(id) ON DELETE CASCADE;
ALTER TABLE contact_meta ADD CONSTRAINT cmmi FOREIGN KEY (mailing_list_meta_choice_id) REFERENCES mailing_list_meta_choice(id) ON DELETE CASCADE;
ALTER TABLE country_tax ADD CONSTRAINT country_tax_vat_note_id_tax_note_id FOREIGN KEY (vat_note_id) REFERENCES tax_note(id) ON DELETE SET NULL;
ALTER TABLE country_tax ADD CONSTRAINT country_tax_no_vat_note_id_tax_note_id FOREIGN KEY (no_vat_note_id) REFERENCES tax_note(id) ON DELETE SET NULL;
ALTER TABLE default_text ADD CONSTRAINT default_text_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE;
ALTER TABLE download ADD CONSTRAINT download_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE CASCADE;
ALTER TABLE download ADD CONSTRAINT download_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE download ADD CONSTRAINT download_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE download ADD CONSTRAINT download_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE facebook_tab ADD CONSTRAINT facebook_tab_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE CASCADE;
ALTER TABLE facebook_tab ADD CONSTRAINT facebook_tab_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE;
ALTER TABLE group_member ADD CONSTRAINT group_member_member_id_member_id FOREIGN KEY (member_id) REFERENCES member(id) ON DELETE CASCADE;
ALTER TABLE group_member ADD CONSTRAINT group_member_group_id_groups_id FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE CASCADE;
ALTER TABLE group_permission ADD CONSTRAINT group_permission_permission_id_permission_id FOREIGN KEY (permission_id) REFERENCES permission(id) ON DELETE CASCADE;
ALTER TABLE group_permission ADD CONSTRAINT group_permission_group_id_groups_id FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE CASCADE;
ALTER TABLE mailing_list ADD CONSTRAINT mailing_list_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE mailing_list_meta ADD CONSTRAINT mailing_list_meta_mailing_list_id_mailing_list_id FOREIGN KEY (mailing_list_id) REFERENCES mailing_list(id) ON DELETE CASCADE;
ALTER TABLE mailing_list_meta_choice ADD CONSTRAINT mmmi FOREIGN KEY (mailing_list_meta_id) REFERENCES mailing_list_meta(id) ON DELETE CASCADE;
ALTER TABLE mapping_pair ADD CONSTRAINT mapping_pair_mapping_id_mapping_id FOREIGN KEY (mapping_id) REFERENCES mapping(id) ON DELETE CASCADE;
ALTER TABLE media_file ADD CONSTRAINT media_file_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE member ADD CONSTRAINT member_sf_guard_user_id_sf_guard_user_id FOREIGN KEY (sf_guard_user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE member ADD CONSTRAINT member_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE offer ADD CONSTRAINT offer_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE offer ADD CONSTRAINT offer_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE offer_item ADD CONSTRAINT offer_item_offer_id_offer_id FOREIGN KEY (offer_id) REFERENCES offer(id) ON DELETE CASCADE;
ALTER TABLE orders ADD CONSTRAINT orders_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE owner ADD CONSTRAINT owner_first_widget_id_widget_id FOREIGN KEY (first_widget_id) REFERENCES widget(id) ON DELETE SET NULL;
ALTER TABLE owner ADD CONSTRAINT owner_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE petition ADD CONSTRAINT petition_mailing_list_id_mailing_list_id FOREIGN KEY (mailing_list_id) REFERENCES mailing_list(id) ON DELETE SET NULL;
ALTER TABLE petition ADD CONSTRAINT petition_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id);
ALTER TABLE petition ADD CONSTRAINT petition_follow_petition_id_petition_id FOREIGN KEY (follow_petition_id) REFERENCES petition(id) ON DELETE SET NULL;
ALTER TABLE petition ADD CONSTRAINT petition_country_collection_id_country_collection_id FOREIGN KEY (country_collection_id) REFERENCES country_collection(id) ON DELETE SET NULL;
ALTER TABLE petition ADD CONSTRAINT petition_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE petition_api_token ADD CONSTRAINT petition_api_token_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE petition_contact ADD CONSTRAINT petition_contact_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE petition_contact ADD CONSTRAINT petition_contact_contact_id_contact_id FOREIGN KEY (contact_id) REFERENCES contact(id) ON DELETE CASCADE;
ALTER TABLE petition_rights ADD CONSTRAINT petition_rights_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE petition_rights ADD CONSTRAINT petition_rights_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE petition_signing ADD CONSTRAINT petition_signing_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE SET NULL;
ALTER TABLE petition_signing ADD CONSTRAINT petition_signing_quota_thank_you_id_quota_id FOREIGN KEY (quota_thank_you_id) REFERENCES quota(id) ON DELETE SET NULL;
ALTER TABLE petition_signing ADD CONSTRAINT petition_signing_quota_id_quota_id FOREIGN KEY (quota_id) REFERENCES quota(id) ON DELETE SET NULL;
ALTER TABLE petition_signing ADD CONSTRAINT petition_signing_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE petition_signing ADD CONSTRAINT petition_signing_download_subscriber_id_download_id FOREIGN KEY (download_subscriber_id) REFERENCES download(id) ON DELETE SET NULL;
ALTER TABLE petition_signing ADD CONSTRAINT petition_signing_download_data_id_download_id FOREIGN KEY (download_data_id) REFERENCES download(id) ON DELETE SET NULL;
ALTER TABLE petition_signing_contact ADD CONSTRAINT petition_signing_contact_petition_signing_id_petition_signing_id FOREIGN KEY (petition_signing_id) REFERENCES petition_signing(id) ON DELETE CASCADE;
ALTER TABLE petition_signing_contact ADD CONSTRAINT petition_signing_contact_contact_id_contact_id FOREIGN KEY (contact_id) REFERENCES contact(id) ON DELETE CASCADE;
ALTER TABLE petition_signing_search ADD CONSTRAINT petition_signing_search_id_petition_signing_id FOREIGN KEY (id) REFERENCES petition_signing(id) ON DELETE CASCADE;
ALTER TABLE petition_signing_wave ADD CONSTRAINT petition_signing_wave_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE SET NULL;
ALTER TABLE petition_signing_wave ADD CONSTRAINT petition_signing_wave_petition_signing_id_petition_signing_id FOREIGN KEY (petition_signing_id) REFERENCES petition_signing(id) ON DELETE CASCADE;
ALTER TABLE petition_signing_wave ADD CONSTRAINT petition_signing_wave_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE SET NULL;
ALTER TABLE petition_text ADD CONSTRAINT petition_text_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE SET NULL;
ALTER TABLE petition_text ADD CONSTRAINT petition_text_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE petition_text ADD CONSTRAINT petition_text_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE;
ALTER TABLE pledge ADD CONSTRAINT pledge_pledge_item_id_pledge_item_id FOREIGN KEY (pledge_item_id) REFERENCES pledge_item(id) ON DELETE CASCADE;
ALTER TABLE pledge ADD CONSTRAINT pledge_contact_id_contact_id FOREIGN KEY (contact_id) REFERENCES contact(id) ON DELETE CASCADE;
ALTER TABLE pledge_item ADD CONSTRAINT pledge_item_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE pledge_text ADD CONSTRAINT pledge_text_pledge_item_id_pledge_item_id FOREIGN KEY (pledge_item_id) REFERENCES pledge_item(id) ON DELETE CASCADE;
ALTER TABLE pledge_text ADD CONSTRAINT pledge_text_petition_text_id_petition_text_id FOREIGN KEY (petition_text_id) REFERENCES petition_text(id) ON DELETE CASCADE;
ALTER TABLE privacy_policy ADD CONSTRAINT privacy_policy_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE;
ALTER TABLE quota ADD CONSTRAINT quota_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE quota ADD CONSTRAINT quota_upgrade_of_id_quota_id FOREIGN KEY (upgrade_of_id) REFERENCES quota(id) ON DELETE SET NULL;
ALTER TABLE quota ADD CONSTRAINT quota_order_id_orders_id FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE SET NULL;
ALTER TABLE quota ADD CONSTRAINT quota_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE SET NULL;
ALTER TABLE store ADD CONSTRAINT store_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE CASCADE;
ALTER TABLE target_list_rights ADD CONSTRAINT target_list_rights_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE target_list_rights ADD CONSTRAINT target_list_rights_mailing_list_id_mailing_list_id FOREIGN KEY (mailing_list_id) REFERENCES mailing_list(id) ON DELETE CASCADE;
ALTER TABLE ticket ADD CONSTRAINT ticket_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE CASCADE;
ALTER TABLE ticket ADD CONSTRAINT ticket_to_id_sf_guard_user_id FOREIGN KEY (to_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE ticket ADD CONSTRAINT ticket_target_list_id_mailing_list_id FOREIGN KEY (target_list_id) REFERENCES mailing_list(id) ON DELETE CASCADE;
ALTER TABLE ticket ADD CONSTRAINT ticket_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE ticket ADD CONSTRAINT ticket_from_id_sf_guard_user_id FOREIGN KEY (from_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE ticket ADD CONSTRAINT ticket_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE widget ADD CONSTRAINT widget_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE SET NULL;
ALTER TABLE widget ADD CONSTRAINT widget_petition_text_id_petition_text_id FOREIGN KEY (petition_text_id) REFERENCES petition_text(id) ON DELETE CASCADE;
ALTER TABLE widget ADD CONSTRAINT widget_petition_id_petition_id FOREIGN KEY (petition_id) REFERENCES petition(id) ON DELETE CASCADE;
ALTER TABLE widget ADD CONSTRAINT widget_parent_id_widget_id FOREIGN KEY (parent_id) REFERENCES widget(id) ON DELETE SET NULL;
ALTER TABLE widget ADD CONSTRAINT widget_origin_widget_id_widget_id FOREIGN KEY (origin_widget_id) REFERENCES widget(id) ON DELETE SET NULL;
ALTER TABLE widget ADD CONSTRAINT widget_campaign_id_campaign_id FOREIGN KEY (campaign_id) REFERENCES campaign(id) ON DELETE CASCADE;
ALTER TABLE widget_owner ADD CONSTRAINT widget_owner_widget_id_widget_id FOREIGN KEY (widget_id) REFERENCES widget(id) ON DELETE CASCADE;
ALTER TABLE widget_owner ADD CONSTRAINT widget_owner_owner_id_owner_id FOREIGN KEY (owner_id) REFERENCES owner(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user ADD CONSTRAINT sf_guard_user_language_id_language_id FOREIGN KEY (language_id) REFERENCES language(id);
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
